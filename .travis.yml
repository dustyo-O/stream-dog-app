language: node_js
node_js:
- 12
env:
  global:
  - secure: mq5QlYmm8eJyzBwPTsuXEmV2y0NfAWfhq71XsMwinFNrWNfSkAEWa39wmWJRFtJKJSOfrizHRguxV6MAYJLDRYH6j73Eu5b4ypYJwhEbA40Zq85bzgjb+dkgJYfGQSqdT4kYjzrXwbP3D/GYiHaoMBScPsBgEzD5surKUyjZoEBZwzOhQnd88xpriMAJOPhmPJNJPWd8RrLcDfgRL2uneAnbau6i5vWEBuIR8OzBXj7m8y5YfXlt/jyJpTbiamo7AJ4AQ5HLHas9+AmgAlmsXkkWypXRgoiAYtcr8uENFQJZWmYqK60A8mWkRw5sUblaOySvN8hHf6lWE2mR6Y+sA31LWAcoLQWMRTiWsDjKrfB9h8/7Fz6bH1ynXJaIQFRjglz2Re2VVru4hn5wsWpr/Smw9Mr9ev3HhjHzCO1lq4AlH5NoJaO+urSpQA5DM8TYd1VESLofwnQEHXR4Rbtb6ACv13SuWFlGcfsu81P8PncdDPZsAMyYDqAd2OI2OGkfuiCbZ1HvDZRhUfD9bd4U5i7Z1DUDwOOIljRGSs0cSeOwmBIemIVKHNI6tLNgde1jp1bQwEbIQ5h2dwhJv0C4O4IqTYAZQPzA9OVth+758f+/IEmOKfJD9Ow/rFaNm2tFpRfJykd2DMQwi/HF5xJQ43ErNjmokMnDD/9QSZyGKDk=
  - secure: sHrc9r8I9l2vshpPqaboVOYUHc984zcyNsmwP7yJLAlWhx+r7Q/N23rmYRRsT1LaePjYULQ3yhR35nxOxFdC0jcTWB/A3TgwkXEnnhEnaZAquWeYABCp6fMErYlI4DTft/i1KZlBvnwKDvi39QU/LLyMGZjEBz+Oy0fOvS/fdPVX7cydb3+JKmWfxLfwM/Iw4Nhw/IUbxYaDID/swOzd8ozSmVYGaxzHHgWp0tcx2kK1+QI2ggpg2SiB68DVXvlKmZIRwauHjno1MhunwlJrMf04ll2HXpsAWOPQO4ZPrM33/Z2r70jTVQZE7iNoAGcJP1NhdoYmHen9braM8BynrN5UVsr72AJRvv6gRBRSLRHeX7Im3iZP07m2Vv+XUzxkKd4poO4AwnURdKhM3ff5bxKD/M+pSn9r70M1USmB9YhG/84/QYO+b9UcyFnoKI1ZOkDxxCHqMsoPtPUnRir1nxQzOMQB81RJOQJ8vZHFzDhFjimZD0EuWTPjLVG8ME4CQPGJ0Joo1LICuq50GwbJUdFUoR6CAddcC0YbDuDCPSEICeiQMUqQw3mvmxIzMIwDzQcETcCdzaftgbl7RDUPN3PFEscy6sOfkhbj1HsxFmkttI3EF2F8uzgPoeeRNuvV9Lx7/0gxpg3eJTvyY+h0IO9f9X+uXpvyEnf7k58OnQo=
  - secure: veb69IIKyAhseaApXmmxUa1+C2w5xoVTYAwmViBEfik1DjKefT68Z9H/E1WmpIRq6eKCrZgxZ+OGWK3m0izi1fKbW2QkWErQNqEL01RC0gF4OCkUP09i8T7RasB+i717LEWp2Mf8daIQFfqWnBZ3kteaCpbEls/LBTeNsHSPEnBmh5RLtEBWbJBp5e7MhmE433L07bLnfjZL7sJ0wmWbzLfHlYCAJ7gN8hz1TGXJYQkqj+ZbEeUW3oLOR8FktIVnTDHWRh//yy703RPsnEEExQ9eckklwWlPuKZ9m7+TViUPZPtPN7fanCEEjrM8DPy7zRnmYGrZ39//fqrCaoAxfEJoqvFMTdIZSj4Tmf4w4NJaWV0rpEknHyEltDAvU8pfWGMYRFeUq4EDqz0VYahQ1kKM6mnseReJGeYRee8KmXLYcWH8tq6XHnSzOBlgiLyxP7F6SnhU6gP+aaLm/um3in9UgfZJ4plRQUpMcpNBeA4i2MioFfHvDoJetcA0Qn5iLa+1zJStxBTt5gEwCvkfDQjuCIXtlZAxW0o5AIoNQFARxxeZQqWMj3QHCec9+f9DPWrfYikqsT1cP74+v+Kv0EghmpbxASr4169ZPwWLW46uhWU80al1SpzL3qJE92EVZbVfaFGDDJQyNd3WhN16R67bDBP0S+ffhFgaR5znJgQ=
  - secure: Oez68NvSoZ4CLtyBPHy16GmlROoIWomYixuFmuHTA/KJXpArRRdQI6gYFLtSbWCirXYm+x+KgO+cqWmVK1rhdWA8suEigm7xJKnWeIJitk/4pgpQYUgUZdEsHNUQgYReSVeHsmugRTFv1H80BhqEkZMnT7HicU7N6oNLh2LOvxmNE8M88ErC1Na/BuVBCOU8zrcOLs6zCIkaYP1vGB5Nvq6Wizo1fdx8WcRZhxtzoYGDjTI36ZNMgP9nGhPMUHbBLYPGbMXJSc1d8R4aX0CpKxHQAMCITye5Pxw9Pq2AWh34OcdH8ehOAwjOvGpGaCVa4/Y50uo+amWu7jQ+qbqRS06JVr5ly8suP4SKbxcz/uCEd4H4LQBz600IAfQ49WQzvs4eqNEKcNlNnI6Kv0qmTFDuWZ0j3KXKEVZq/7+LKgXcytKOy9EhcC2NhkJJRHiuFTNS5nRdYiPmnBLll2k3cjokt3G+C/1cp4o5Gt7mxrNNKaxsoJJc04VSTKq1iAwJQ1zj2ROdCwQcf21+Ukd+ZQcgUAa3gkMX1b5lC13kDE+vg4bbgDfDlfiKAs/KFMeHfkb0dM5F5p96+YUmZgFciGqDXjWOqwCb+gGeqBGL6p6whLU3LnFpilHZgyYPlARclvKkwSQX+EQWoVNaEwpaRL21TL7Yi02Ml6AZrXcwEN8=
  - secure: B61e+ym1ZzbbYGKieCM6OWjEdMwxZaVoqZPllsvbd0CFXL4yOoQ2u7ZaywGBma5Ux+l8/8rQ4j7x4Sf86mnk6dVGKm6yT012Y8u1jl6ng5WKahjI6SlwDBnMOGv3/u9oXIB+s8rNFLYWZFwQkhJLW5VJXZQp2pq6yH1XSG283y0g6TURHGjIq4agN2qqsZKciywU6L3Z8EGbfdjv1jxywjH+ZVVz4c1yK2qhjQCluZiF549j/A4v/dJZ0fccIKIREYXm9+KmCCTV9kEjmBdaHn1IkyTu3hNALTjlfsbDfJqpcJlHnjDWmmvop+TX5miZHUAjPeP/B63a7+HRk0vYCYVbz3K+8j5dekLq0M5MtI2TXP2SCDP6LMT7Iih2zVK11DEUKFDZUFs+N9KErybIbxkGsihU+/R2Q9XdvsNVF5GB1PA0wJ0xH7LO5ZHW7S6Ie0cTsdMtAfyPhRXtdF/5MU1LEO13P440nTBGxDsyVjqNZThj6IGJEqeRdURAaczMOdvfHFKR36NmgTha3+stqNwC8/o2uOkxhNHBPbahM8MTc16QntYjU1MhwVRr4EJ/acrwj7ZWCTJafpqliNf1ALtu+BoyCnyd5ZmaINFuztQBAeY40JOf0IrwoITf7/ShdH4Z1/gKsbAIspScZOp9lLgdMhEmMYG7kMRt4d2oc8U=
  - secure: zWIbG7DG5RwkbXnikDOr4lTRQd98YmWaE6hPCTrvUpwX8SAbfbGQ86BVYiVVZ3/LjmA0d8rsTIQ61KHq4i+JmQpAnwHd9BYljYtPDBxEu38i+ZKgx8T4OSphtVRgziPZGaBDL/yGgj/Yv6ItJ0a54xbhwmMmNRpG0JqFyG7Y8lTNgov6s1JTCIxMdenp7ZGK6fqly6Y32qCq9C5v7LI3YnFoQCa+3uDQBKVLsRLiR1UbMvXWETBQQLvwpJSldyXaoND1zfLgidTM/CFYcz/hrwBynDOLlAVc9Kzjf5Oy/WXjKnOCw1Ns8wa4uIFUeVxb8Oor1xgo7KMIzBncRpwJF6NT14gqH4hTgF1+7osy+M/4tfHN893U5vrvrLmH6UzpuLa3tfqLfgX3D1uOhWoK4e/vRS9ZU+Gg6iwq8KnvIMZDFyCT9UGTgHivFS5aawp4bZMu8okFsd9xck4TLAew4QCTUAaDGYHzBnUMXQjCmX/aEXdh3XERy6tFV4AkaHTABLobjp6oHw+bVLM7Kld939xPI80NIbDUKNNPYdb4S3j8ihvZHobhqd2XUGpCt9h+bWyLEJLCYYf5IgBt+7ZhL9hq0fuo8l5RS5DigaK3E68Uy872Q6amNStqkPUZGT4IjGY6gr+1LQwkTIzUiCPJ4zJDUjc7g3ZGdNwDfZFQq7A=
jobs:
  include:
  - stage: build
    script: yarn build
  - stage: test
    script:
      - yarn serve -s build&
      - npx wait-port 5000
      - npm test
stages:
- build
- name: test
  if: branch != master
deploy:
  provider: pages
  skip_cleanup: true
  github_token: "$GITHUB_TOKEN"
  keep_history: true
  on:
    branch: master
